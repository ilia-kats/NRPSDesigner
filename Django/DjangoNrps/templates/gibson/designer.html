{% extends "base.html" %}

{% load staticfiles %}

{% block css-include %}
<link rel="stylesheet" type="text/css" href="{% static "css/designer.css" %}" />
<link rel="stylesheet" type="text/css" href="{% static "css/primers.css" %}" />
<link rel="stylesheet" type="text/css" href="{% static "css/formtools.css" %}"/>
<link rel="stylesheet" type="text/css" href="{% static "css/jFragment.css" %}" />
{% endblock %}

{% block js-include %}

<script type="text/javascript">
var gibthon_base_url = '{% url 'gibson.views.constructs' %}';
var gibthon_api_url = gibthon_base_url + 'api/';

</script>

<script src="{% static "js/easel.js" type="text/javascript" %}"></script>
<script src="{% static "js/tween.js" type="text/javascript" %}"></script>

<script src="{% static "js/libfrag.js" type="text/javascript" %}"></script>
<script src="{% static "js/libdesigner.js" type="text/javascript" %}"></script>
<script src="{% static "js/designer.js" type="text/javascript" %}"></script>
<script src="{% static "js/ajax.js" type="text/javascript" %}"></script>



{% endblock %}


{% block content %}
<div>


			<ul class="nav nav-tabs" id="tabs">


				<li class="active">
					<a data-target="#guiToolContent" href="{% url 'guiTool' nrp.pk %}" data-toggle="tab" data-intro="This is a tab" data-step="1">
						NRP
					</a>
					</li>
						<li>

					<a id="domainSequence" data-toggle="tab" href="#domainSequenceContent" class='tab-link'>
						Domains
					</a>
				</li>
						<li>

					<a id="constructTab"
					{% if nrp.construct %}
					href="{% url 'design_tab' cid=nrp.construct.pk %}"
					{% else %}
					href = ""
					{% endif %}
					data-toggle="tab"
					data-target="#constructContent" >
						Designer
					</a>
				</li>

				<li>
					<a id="primerTab"
						{% if nrp.construct %}
					href="{% url 'primers' cid=nrp.construct.pk %}"
						{% else %}
					href = ""
						{% endif %}
					data-toggle="tab" 
					data-target = "primersContent">
						Primers
					</a>
				</li>

			</ul>
			


		
</div>

<div class="tab-content">
  <div class="tab-pane" id="guiToolContent">Loading...</div>
    <div class="tab-pane" id="domainSequenceContent">
<iframe id="domainSequenceIFrame" src="" style="width:100%;">
</iframe>
</div>
  <div class="tab-pane" id="constructContent">Loading...</div>
    <div class="tab-pane" id="constructContent">Loading...</div>
    <div class="tab-pane" id="primersContent">Loading...</div>

</div>

{% endblock %}

{% block dialog %}
<div id='confirm_delete' style='display:none'>
	<div id='delete_contents'>
		<div style="text-align:center;margin-top:1.5em;">
			<p>Are you sure you want to delete this construct?</p>
		<div>
		<div>
			<button id="cancel-delete">Cancel</button>
			<button id="confirm-delete">Delete</button>
		</div>
	</div>
</div>

<div id='primer_dlg' style='display:none'></div>


{% endblock %}

{% block js %}
<script type='text/javascript'>



	jQuery(document).ready( function($) {
		
  jQuery("#tabs").bind("show", function(e) {    
    var contentID  = jQuery(e.target).attr("data-target");
    var contentURL = jQuery(e.target).attr("href");
    if (typeof(contentURL) != 'undefined' & contentURL == "#domainSequenceContent"){
    	console.log("blablu");
    	jQuery("#domainSequenceIFrame").attr("src", "domainSequence");
    }
    else if (typeof(contentURL) != 'undefined'){
      jQuery(contentID).load(contentURL, function(){ jQuery("#tabs").tab(); });
    }
    else {
      jQuery(contentID).tab('show');
    }
  });

  // load first tab on initialization
  //jQuery('#guiToolContent').load(jQuery("#tabs a:first").attr("href"));

	});


</script>
{% endblock %}
